<div class="input-area-container">
    <!-- Emoji Picker über dem Textfeld -->
    <div class="emoji-picker-container" *ngIf="showEmojiPicker">
        <emoji-mart (emojiSelect)="addEmoji($event)" [autoFocus]="true" [darkMode]="false" color="#444DF2" emoji="grin"
            [emojiSize]="32" [isNative]="true" [showPreview]="false" [exclude]="['flags']"
            [style]="{ fontFamily: 'Nunito'}"></emoji-mart>
    </div>

    <!-- Erwähnungsliste -->
    <div class="mention-list-container" *ngIf="showMentionList">
        <div class="mention-list-scroll-wrapper">
            <ul class="mention-list">
                <li *ngFor="let user of filteredUsers" (click)="mentionUser(user)">
                    <img [src]="user.avatar" alt="Avatar" class="mention-avatar" />
                    <span>{{ user.name }}</span>
                </li>
            </ul>
        </div>
    </div>

    <textarea #inputElement type="text" [(ngModel)]="messageText" (input)="onTextChange($event)"
        [placeholder]="channelName ? 'Nachricht an #' + channelName : 'Antworten...'" (keyup.enter)="sendMessage()">
    </textarea>

    <div class="input-area-btns">
        <div class="left-btn-container">
            <div class="emojis-btn" (click)="toggleEmojiPicker()">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M13.5 9C13.9333 9 14.2917 8.85833 14.575 8.575C14.8583 8.29167 15 7.93333 15 7.5C15 7.06667 14.8583 6.70833 14.575 6.425C14.2917 6.14167 13.9333 6 13.5 6C13.0667 6 12.7083 6.14167 12.425 6.425C12.1417 6.70833 12 7.06667 12 7.5C12 7.93333 12.1417 8.29167 12.425 8.575C12.7083 8.85833 13.0667 9 13.5 9ZM6.5 9C6.93333 9 7.29167 8.85833 7.575 8.575C7.85833 8.29167 8 7.93333 8 7.5C8 7.06667 7.85833 6.70833 7.575 6.425C7.29167 6.14167 6.93333 6 6.5 6C6.06667 6 5.70833 6.14167 5.425 6.425C5.14167 6.70833 5 7.06667 5 7.5C5 7.93333 5.14167 8.29167 5.425 8.575C5.70833 8.85833 6.06667 9 6.5 9ZM10 15.5C10.95 15.5 11.8167 15.2877 12.6 14.863C13.3833 14.4377 13.9917 13.9 14.425 13.25C14.625 12.95 14.6543 12.6667 14.513 12.4C14.371 12.1333 14.15 12 13.85 12C13.7333 12 13.6167 12.0333 13.5 12.1C13.3833 12.1667 13.2917 12.25 13.225 12.35C12.8583 12.85 12.4 13.25 11.85 13.55C11.3 13.85 10.6833 14 10 14C9.31667 14 8.7 13.85 8.15 13.55C7.6 13.25 7.14167 12.85 6.775 12.35C6.70833 12.25 6.61267 12.1667 6.488 12.1C6.36267 12.0333 6.24167 12 6.125 12C5.84167 12 5.62933 12.129 5.488 12.387C5.346 12.6457 5.36667 12.9167 5.55 13.2C6 13.8833 6.61667 14.4377 7.4 14.863C8.18333 15.2877 9.05 15.5 10 15.5ZM10 20C8.61667 20 7.31667 19.7373 6.1 19.212C4.88333 18.6873 3.825 17.975 2.925 17.075C2.025 16.175 1.31267 15.1167 0.788 13.9C0.262667 12.6833 0 11.3833 0 10C0 8.61667 0.262667 7.31667 0.788 6.1C1.31267 4.88333 2.025 3.825 2.925 2.925C3.825 2.025 4.88333 1.31233 6.1 0.787C7.31667 0.262333 8.61667 0 10 0C11.3833 0 12.6833 0.262333 13.9 0.787C15.1167 1.31233 16.175 2.025 17.075 2.925C17.975 3.825 18.6873 4.88333 19.212 6.1C19.7373 7.31667 20 8.61667 20 10C20 11.3833 19.7373 12.6833 19.212 13.9C18.6873 15.1167 17.975 16.175 17.075 17.075C16.175 17.975 15.1167 18.6873 13.9 19.212C12.6833 19.7373 11.3833 20 10 20ZM10 18C12.2167 18 14.1043 17.221 15.663 15.663C17.221 14.1043 18 12.2167 18 10C18 7.78333 17.221 5.89567 15.663 4.337C14.1043 2.779 12.2167 2 10 2C7.78333 2 5.896 2.779 4.338 4.337C2.77933 5.89567 2 7.78333 2 10C2 12.2167 2.77933 14.1043 4.338 15.663C5.896 17.221 7.78333 18 10 18Z"
                        fill="#686868" />
                </svg>
            </div>
            <div class="mention-btn" (click)="toggleMentionList()">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M10 20C8.63333 20 7.34167 19.7373 6.125 19.212C4.90833 18.6873 3.846 17.9707 2.938 17.062C2.02933 16.154 1.31267 15.0917 0.788 13.875C0.262667 12.6583 0 11.3667 0 10C0 8.61667 0.262667 7.321 0.788 6.113C1.31267 4.90433 2.02933 3.846 2.938 2.938C3.846 2.02933 4.90833 1.31233 6.125 0.787C7.34167 0.262333 8.63333 0 10 0C11.3833 0 12.679 0.262333 13.887 0.787C15.0957 1.31233 16.154 2.02933 17.062 2.938C17.9707 3.846 18.6873 4.90433 19.212 6.113C19.7373 7.321 20 8.61667 20 10V11.45C20 12.4333 19.6627 13.2707 18.988 13.962C18.3127 14.654 17.4833 15 16.5 15C15.9 15 15.3417 14.8667 14.825 14.6C14.3083 14.3333 13.8833 13.9833 13.55 13.55C13.1 14 12.571 14.3543 11.963 14.613C11.3543 14.871 10.7 15 10 15C8.61667 15 7.43767 14.5123 6.463 13.537C5.48767 12.5623 5 11.3833 5 10C5 8.61667 5.48767 7.43733 6.463 6.462C7.43767 5.48733 8.61667 5 10 5C11.3833 5 12.5627 5.48733 13.538 6.462C14.5127 7.43733 15 8.61667 15 10V11.45C15 11.9333 15.15 12.3123 15.45 12.587C15.75 12.8623 16.1 13 16.5 13C16.9 13 17.25 12.8623 17.55 12.587C17.85 12.3123 18 11.9333 18 11.45V10C18 7.81667 17.2123 5.93733 15.637 4.362C14.0623 2.78733 12.1833 2 10 2C7.81667 2 5.93733 2.78733 4.362 4.362C2.78733 5.93733 2 7.81667 2 10C2 12.1833 2.78733 14.0623 4.362 15.637C5.93733 17.2123 7.81667 18 10 18H14C14.2833 18 14.5207 18.096 14.712 18.288C14.904 18.4793 15 18.7167 15 19C15 19.2833 14.904 19.5207 14.712 19.712C14.5207 19.904 14.2833 20 14 20H10ZM10 13C10.8333 13 11.5417 12.7083 12.125 12.125C12.7083 11.5417 13 10.8333 13 10C13 9.16667 12.7083 8.45833 12.125 7.875C11.5417 7.29167 10.8333 7 10 7C9.16667 7 8.45833 7.29167 7.875 7.875C7.29167 8.45833 7 9.16667 7 10C7 10.8333 7.29167 11.5417 7.875 12.125C8.45833 12.7083 9.16667 13 10 13Z"
                        fill="#686868" />
                </svg>
            </div>
        </div>





        <!-- Wenn im Bearbeitungsmodus -->
        <div class="edit-actions" *ngIf="editingMessageId">
            <button class="cancel-btn" (click)="cancelEdit()">Abbrechen</button>
            <button class="save-btn" [disabled]="!messageText.trim()" (click)="submitEdit()">Speichern</button>
        </div>

        <!-- Wenn im normalen Modus -->
        <div class="send-btn" *ngIf="!editingMessageId" (click)="sendMessage()">
            <svg width="23" height="20" viewBox="0 0 23 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M2.5 19.2811C2.08333 19.4478 1.6875 19.4111 1.3125 19.1711C0.9375 18.932 0.75 18.5832 0.75 18.1249V13.4686C0.75 13.177 0.833333 12.9166 1 12.6874C1.16667 12.4582 1.39583 12.3124 1.6875 12.2499L10.75 9.99989L1.6875 7.74989C1.39583 7.68739 1.16667 7.54155 1 7.31239C0.833333 7.08322 0.75 6.8228 0.75 6.53114V1.87489C0.75 1.41655 0.9375 1.06739 1.3125 0.827386C1.6875 0.58822 2.08333 0.551969 2.5 0.718636L21.75 8.84364C22.2708 9.0728 22.5312 9.45822 22.5312 9.99989C22.5312 10.5416 22.2708 10.927 21.75 11.1561L2.5 19.2811Z"
                    fill="#444DF2" />
            </svg>
        </div>





    </div>
</div>